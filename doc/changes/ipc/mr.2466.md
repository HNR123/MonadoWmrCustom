Refactor client device to share more code, this change introduces the shared
ipc_client_xdev struct.
